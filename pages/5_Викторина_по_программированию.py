import streamlit as st
import requests
import json
import random

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
def get_access_token() -> str:
    url = "https://ngw.devices.sberbank.ru:9443/api/v2/oauth"
    payload = 'scope=GIGACHAT_API_PERS'
    headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
        'Accept': 'application/json',
        'RqUID': '254ee246-4b6b-49e3-b72e-29c60d84e69d',
        'Authorization': 'Basic YjA2NmI2NDAtZTU3ZC00ZDJkLTk3OWMtODRmYzkyNjAyZjI2OjczYzc1NjdkLWNjNWEtNDJmMS04ZGI3LWFhZTQxZjBlM2UxOA=='
    }
    response = requests.request("POST", url, headers=headers, data=payload, verify=False)
    access_token = response.json()["access_token"]
    return access_token

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ GigaChat
def send_prompt(msg: str, access_token: str):
    url = "https://gigachat.devices.sberbank.ru/api/v1/chat/completions"

    payload = json.dumps({
        "model": "GigaChat-Pro",
        "messages": [
            {
                "role": "user",
                "content": msg,
            }
        ],
    })
    headers = {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
        'Authorization': f'Bearer {access_token}'
    }

    response = requests.post(url, headers=headers, data=payload, verify=False)
    return response.json()["choices"][0]["message"]["content"]

def generate_questions(access_token: str):
    prompt = (
        "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Python –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–º '|'. –°—Ä–∞–∑—É –≤—ã–≤–æ–¥–∏ —ç—Ç—É —Å—Ç—Ä–æ–∫—É, –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤ "
        "–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: [–í–æ–ø—Ä–æ—Å 1: ...  | –í–æ–ø—Ä–æ—Å 2: ... |  –í–æ–ø—Ä–æ—Å 3: ... | –í–æ–ø—Ä–æ—Å 4: ...  | –í–æ–ø—Ä–æ—Å 5: ... |  –í–æ–ø—Ä–æ—Å 6: ... |  –í–æ–ø—Ä–æ—Å 7: ...  | –í–æ–ø—Ä–æ—Å 8: ... |  –í–æ–ø—Ä–æ—Å 9: ... | –í–æ–ø—Ä–æ—Å 10: ... ]"
    )
    response = send_prompt(prompt, access_token)
    return response.strip()
 
a = generate_questions(get_access_token())

def parse_question_response(a: str):
    a = a.replace("]", "")
    a = a.replace("[", "")
    parts = a.split("|")    
    questions = [part.strip() for part in parts[:10]]
    return questions

b = parse_question_response(a)

def generate_answers(access_token: str, b: str):
    prompt = (f"–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–æ –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –∫ –∫–∞–∂–¥–æ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–∑ {b}. –û–¥–∏–Ω –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º, –∞ –¥—Ä—É–≥–æ–π - –Ω–µ–≤–µ—Ä–Ω—ã–º."
            "–ü—Ä–µ–¥—Å—Ç–∞–≤—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å—Ç—Ä–æ–∫–∏. –û—Ç–≤–µ—Ç—ã –∫ –≤–æ–ø—Ä–æ—Å—É —Ä–∞–∑–¥–µ–ª–∏ –º–µ–∂–¥—É —Å–æ–±–æ–π —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π (;). –ü–æ—Å–ª–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ —Å—Ç–∞–≤—å –∑–Ω–∞–∫ '|' "
            '''–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: [–í–æ–ø—Ä–æ—Å 1: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 2: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 3: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 4: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 5: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 6: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 7: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 8: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 9: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... |
            –í–æ–ø—Ä–æ—Å 10: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ; –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ... ]
            –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞: –í–æ–ø—Ä–æ—Å 1: –ß—Ç–æ —Ç–∞–∫–æ–µ list comprehension –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - List comprehension ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —É—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ —Å–ø–∏—Å–∫–∞. –ü—Ä–∏–º–µ—Ä: `[x**2 for x in ran
ge(10) if x % 2 == 0]`.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - List comprehension ‚Äî —ç—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –≤ Python, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∑–∞–º–µ–Ω–µ–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏.
|
–í–æ–ø—Ä–æ—Å 2: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –°–ª–æ–≤–∞—Ä—å –≤ Python —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ `{}` –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `dict()`. –ù–∞–ø—Ä–∏–º–µ—Ä: `my_dict = {"key1": "value1", "key2": "value2"}`. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `my_dict["new_key"] = "new_value"`.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –°–ª–æ–≤–∞—Ä—å –≤ Python —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ `[ ]`, –∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `.append()`.
|
–í–æ–ø—Ä–æ—Å 3: –ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏ –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –§—É–Ω–∫—Ü–∏—è ‚Äî —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤–Ω–µ –∫–ª–∞—Å—Å–∞. –ú–µ—Ç–æ–¥ –∂–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫–ª–∞—Å—Å—É –∏ –æ–ø–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä–≤—ã–π –Ω–µ—è
–≤–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî `self`, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–∏–π –æ–±—ä–µ–∫—Ç.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ –º–µ—Ç–æ–¥—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∫–ª–∞—Å—Å–µ.
|
–í–æ–ø—Ä–æ—Å 4: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ Python –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ. –î–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –º–µ—Ç–æ–¥—ã —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—á–µ
—Ä–Ω–∏–π –∫–ª–∞—Å—Å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–æ–¥—ã —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ú–µ—Ö–∞–Ω–∏–∑–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ Python –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–º, —á—Ç–æ –∑–¥–µ—Å—å –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
|
–í–æ–ø—Ä–æ—Å 5: –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É == –∏ is –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –û–ø–µ—Ä–∞—Ç–æ—Ä `==` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä `is` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∂–¥–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —Ç.–µ. —è–≤–ª—è—é—Ç—Å—è –ª–∏ –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –æ–±—ä–µ–∫—Ç–æ–º –≤ –ø–∞–º—è—Ç–∏.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –û–ø–µ—Ä–∞—Ç–æ—Ä `is` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π, –∞ `==` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–æ–≤.
|
–í–æ–ø—Ä–æ—Å 6: –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å –ø–æ–º–æ—â—å—é –º–æ–¥—É–ª—è Flask?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Flask –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, `app.py`, –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```python
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run()
```
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å Flask, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç `pip install flask` –∏ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π `python -m http.server`.
|
–í–æ–ø—Ä–æ—Å 7: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ Python –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `open()`, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –ü–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ñ–∞–π–ª —Å–ª–µ–¥—É–µ—Ç –∑–∞–∫—Ä—ã—Ç—å —Å –ø
–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `close()`.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –§–∞–π–ª—ã –≤ Python –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `file_object = File("filename")`, –ø–æ—Å–ª–µ —á–µ–≥–æ –∏—Ö –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ `.read()` –∏ `.write()`.
|
–í–æ–ø—Ä–æ—Å 8: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (yield) –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –≤ Python –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `yield` –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –≤–æ–∑–≤—Ä–∞—â–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∫
–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã —ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å.
|
–í–æ–ø—Ä–æ—Å 9: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ Python –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `try...except...else...finally`. –í –±–ª–æ–∫–µ `try` —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏, –∞ –≤ –±–ª–æ–∫–∞—Ö `except` —É–∫–∞–∑
—ã–≤–∞—é—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ Python –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `raise`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
|
–í–æ–ø—Ä–æ—Å 10: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ Python?
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –≤ Python ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ –∫–ª–∞—Å—Å–æ–≤ –±–µ–∑
 –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ Python –∏–∑–º–µ–Ω—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ–∑–≤–æ–ª—è—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
            '''
        
        )
    response = send_prompt(prompt, access_token)
    return response

c = generate_answers(get_access_token(), b)


print(c)
def parse_answers_response(c: str):
    parts = c.split("|")    
    ww = [part.strip() for part in parts[:10]]
    questions = ""
    bn = "$"
    for i in range(len(ww)):
        h = ww[i].split("?")
        questions += h[-1]
        questions += bn
    pp = questions.split("$")
    nn = " ".join(pp)
    nn = nn.replace("–æ—Ç–≤–µ—Ç", "")
    nn = nn.replace("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π", "$")
    nn = nn.replace("–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π", "|")
    nn = nn.replace("-", "")
    nn = nn.replace("|", "", 1)
    mm = nn.split("|")
    return mm
    

d = parse_answers_response(c)
print(d)
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
if "health" not in st.session_state:
    st.session_state.health = 100
if "current_question" not in st.session_state:
    st.session_state.current_question = 0
if "game_over" not in st.session_state:
    st.session_state.game_over = False


st.title("–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ (–±–∏—Ç–≤–∞) –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ Python")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
st.write(f"–ó–¥–æ—Ä–æ–≤—å–µ –≤—Ä–∞–≥–∞: {st.session_state.health}")
st.progress(st.session_state.health / 100)

# –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
if not st.session_state.game_over:
    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    st.write(f"{b[st.session_state.current_question]}")

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
    options = d[st.session_state.current_question].split("$")
    rightoption = options[0]
    selected_option = st.radio("–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç:", options)

    # –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
    if st.button("–û—Ç–≤–µ—Ç–∏—Ç—å"):
        if selected_option == rightoption or selected_option == rightoption + (" "):
            st.session_state.health -= 10
            if st.session_state.health <= 0:
                st.session_state.health = 0
                st.session_state.game_over = True
                st.success("–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ")
            else:
                st.success("–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ó–¥–æ—Ä–æ–≤—å–µ –≤—Ä–∞–≥–∞ —É–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ 10. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!")
                st.session_state.current_question += 1
                if st.session_state.current_question >= 10:
                    st.session_state.game_over = True
                    st.success("–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã! –í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ")
                    
                
                    
        
        else:
            st.session_state.game_over = True
            st.error("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. üò¢")

# –ï—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
if st.session_state.game_over:
    if st.session_state.health <= 0:
        st.success("–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ")
    else:
        st.error("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! üò¢")


